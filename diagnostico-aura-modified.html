<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Diagn√≥stico AURA ‚Äî Descubre tu Protocolo Ideal</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,300;0,400;0,600;1,300;1,400&family=Outfit:wght@300;400;500;600&display=swap" rel="stylesheet">
<!-- EmailJS SDK -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
<script type="text/javascript">
  (function() {
    emailjs.init("b0zh_dXjgUI8CsMAE"); // Tu Public Key
  })();
</script>
<style>
:root {
  --bg: #f5f2ed;
  --bg-up: #eae6e0;
  --surface: #ffffff;
  --accent: #3d6b5c;
  --accent-light: #4d8270;
  --accent-dim: rgba(61,107,92,.1);
  --text: #1e1e1c;
  --text-dim: #5a574f;
  --text-low: #8a8680;
  --font-d: 'Playfair Display', Georgia, serif;
  --font-b: 'Outfit', sans-serif;
}

* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  font-family: var(--font-b);
  background: var(--bg);
  color: var(--text);
  line-height: 1.6;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  -webkit-font-smoothing: antialiased;
  overflow-x: hidden;
}

/* Part√≠culas flotantes */
#particles-canvas {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 1;
}

body::after {
  content: '';
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 1;
  opacity: 0.065;
  background: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
  animation: particleFlow 25s linear infinite;
}

@keyframes particleFlow {
  0% { transform: translateY(0); }
  100% { transform: translateY(-10%); }
}

.container {
  max-width: 720px;
  margin: 0 auto;
  padding: 2rem 1.5rem;
  flex: 1;
  position: relative;
  z-index: 2;
}

/* Header */
.header {
  text-align: center;
  margin-bottom: 3rem;
  padding-top: 2rem;
}

.logo {
  font-family: var(--font-d);
  font-weight: 300;
  font-size: 1.1rem;
  letter-spacing: 0.42em;
  color: var(--text);
  text-decoration: none;
  margin-bottom: 1rem;
  display: inline-block;
}

.logo span {
  color: var(--accent);
}

.header h1 {
  font-family: var(--font-d);
  font-weight: 300;
  font-size: clamp(2rem, 5vw, 2.8rem);
  color: var(--text);
  margin-bottom: 1rem;
  line-height: 1.2;
}

.header p {
  color: var(--text-dim);
  font-size: 1.05rem;
  max-width: 540px;
  margin: 0 auto;
}

/* Progress Bar */
.progress-container {
  background: var(--bg-up);
  height: 4px;
  border-radius: 2px;
  margin-bottom: 3rem;
  overflow: hidden;
}

.progress-bar {
  height: 100%;
  background: linear-gradient(90deg, var(--accent), var(--accent-light));
  width: 0%;
  transition: width 0.5s cubic-bezier(0.22, 1, 0.36, 1);
}

/* Question Card */
.question-card {
  background: var(--surface);
  padding: 3rem 2.5rem;
  border-radius: 4px;
  box-shadow: 0 4px 24px rgba(61, 107, 92, 0.08);
  border: 1px solid rgba(61, 107, 92, 0.08);
  margin-bottom: 2rem;
  display: none;
  opacity: 0;
  transform: translateY(20px);
  transition: opacity 0.4s, transform 0.4s;
}

.question-card.active {
  display: block;
  animation: slideIn 0.5s forwards;
}

@keyframes slideIn {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.step-label {
  font-size: 0.7rem;
  letter-spacing: 0.3em;
  text-transform: uppercase;
  color: var(--accent);
  margin-bottom: 1.5rem;
  font-weight: 400;
}

.question-card h2 {
  font-family: var(--font-d);
  font-weight: 400;
  font-size: 1.8rem;
  color: var(--text);
  margin-bottom: 1.5rem;
  line-height: 1.3;
}

.question-card p {
  color: var(--text-dim);
  margin-bottom: 2rem;
  font-size: 0.95rem;
}

/* Form Elements */
.form-group {
  margin-bottom: 1.5rem;
}

label {
  display: block;
  font-size: 0.9rem;
  color: var(--text);
  margin-bottom: 0.5rem;
  font-weight: 400;
}

input[type="text"],
input[type="email"],
input[type="tel"],
input[type="url"],
select,
textarea {
  width: 100%;
  padding: 0.9rem 1.2rem;
  font-family: var(--font-b);
  font-size: 0.95rem;
  border: 1px solid rgba(61, 107, 92, 0.2);
  background: var(--surface);
  color: var(--text);
  border-radius: 3px;
  transition: border-color 0.3s, box-shadow 0.3s;
}

input[type="text"]:focus,
input[type="email"]:focus,
input[type="tel"]:focus,
input[type="url"]:focus,
select:focus,
textarea:focus {
  outline: none;
  border-color: var(--accent);
  box-shadow: 0 0 0 3px var(--accent-dim);
}

textarea {
  resize: vertical;
  min-height: 100px;
}

.required {
  color: var(--accent);
  margin-left: 2px;
}

/* Radio Buttons */
.radio-group {
  display: flex;
  flex-direction: column;
  gap: 0.8rem;
}

.radio-option {
  position: relative;
  padding-left: 2rem;
  cursor: pointer;
  user-select: none;
  display: flex;
  align-items: center;
}

.radio-option input[type="radio"] {
  position: absolute;
  opacity: 0;
  cursor: pointer;
}

.radio-option .radio-custom {
  position: absolute;
  left: 0;
  top: 50%;
  transform: translateY(-50%);
  height: 20px;
  width: 20px;
  border: 2px solid rgba(61, 107, 92, 0.3);
  border-radius: 50%;
  transition: all 0.3s;
}

.radio-option input[type="radio"]:checked ~ .radio-custom {
  border-color: var(--accent);
  background: var(--accent);
}

.radio-option .radio-custom::after {
  content: "";
  position: absolute;
  display: none;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: white;
}

.radio-option input[type="radio"]:checked ~ .radio-custom::after {
  display: block;
}

.radio-option label {
  margin: 0;
  cursor: pointer;
  font-size: 0.95rem;
}

/* Checkboxes */
.checkbox-group {
  display: flex;
  flex-direction: column;
  gap: 0.8rem;
}

.checkbox-option {
  position: relative;
  padding-left: 2rem;
  cursor: pointer;
  user-select: none;
  display: flex;
  align-items: flex-start;
}

.checkbox-option input[type="checkbox"] {
  position: absolute;
  opacity: 0;
  cursor: pointer;
}

.checkbox-option .checkbox-custom {
  position: absolute;
  left: 0;
  top: 3px;
  height: 20px;
  width: 20px;
  border: 2px solid rgba(61, 107, 92, 0.3);
  border-radius: 3px;
  transition: all 0.3s;
}

.checkbox-option input[type="checkbox"]:checked ~ .checkbox-custom {
  border-color: var(--accent);
  background: var(--accent);
}

.checkbox-option .checkbox-custom::after {
  content: "";
  position: absolute;
  display: none;
  left: 6px;
  top: 2px;
  width: 5px;
  height: 10px;
  border: solid white;
  border-width: 0 2px 2px 0;
  transform: rotate(45deg);
}

.checkbox-option input[type="checkbox"]:checked ~ .checkbox-custom::after {
  display: block;
}

.checkbox-option label {
  margin: 0;
  cursor: pointer;
  font-size: 0.95rem;
  line-height: 1.5;
}

/* Error Message */
.error-message {
  display: none;
  color: #c94b4b;
  font-size: 0.85rem;
  margin-top: 0.5rem;
  padding-left: 0.2rem;
}

.error-message.show {
  display: block;
}

/* Buttons */
.btn-group {
  display: flex;
  gap: 1rem;
  margin-top: 2.5rem;
}

.btn {
  padding: 1rem 2rem;
  font-family: var(--font-b);
  font-size: 0.95rem;
  font-weight: 400;
  border: none;
  border-radius: 3px;
  cursor: pointer;
  transition: all 0.3s;
  flex: 1;
}

.btn-primary {
  background: var(--accent);
  color: white;
}

.btn-primary:hover {
  background: var(--accent-light);
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(61, 107, 92, 0.2);
}

.btn-primary:disabled {
  background: var(--text-low);
  cursor: not-allowed;
  transform: none;
}

.btn-secondary {
  background: transparent;
  color: var(--text);
  border: 1px solid rgba(61, 107, 92, 0.2);
}

.btn-secondary:hover {
  background: var(--accent-dim);
  border-color: var(--accent);
}

/* Loading spinner */
.loading-spinner {
  display: none;
  text-align: center;
  padding: 2rem;
}

.loading-spinner.show {
  display: block;
}

.spinner {
  border: 3px solid var(--accent-dim);
  border-top: 3px solid var(--accent);
  border-radius: 50%;
  width: 40px;
  height: 40px;
  animation: spin 1s linear infinite;
  margin: 0 auto 1rem;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* Success/Error messages */
.status-message {
  display: none;
  padding: 1.5rem;
  border-radius: 4px;
  margin-bottom: 1.5rem;
  text-align: center;
}

.status-message.show {
  display: block;
}

.status-message.success {
  background: rgba(61, 107, 92, 0.1);
  border: 1px solid var(--accent);
  color: var(--accent);
}

.status-message.error {
  background: rgba(201, 75, 75, 0.1);
  border: 1px solid #c94b4b;
  color: #c94b4b;
}

/* Resumen */
.resumen {
  background: var(--bg-up);
  padding: 1.5rem;
  border-radius: 3px;
  margin-bottom: 2rem;
  line-height: 1.8;
}

/* Footer */
footer {
  background: var(--surface);
  padding: 2rem 1.5rem;
  text-align: center;
  border-top: 1px solid rgba(61, 107, 92, 0.08);
  position: relative;
  z-index: 2;
}

footer p {
  color: var(--text-low);
  font-size: 0.85rem;
}

footer a {
  color: var(--accent);
  text-decoration: none;
}

footer a:hover {
  text-decoration: underline;
}

/* Responsive */
@media (max-width: 600px) {
  .container {
    padding: 1.5rem 1rem;
  }
  
  .question-card {
    padding: 2rem 1.5rem;
  }
  
  .btn-group {
    flex-direction: column-reverse;
  }
}
</style>
</head>
<body>

<canvas id="particles-canvas"></canvas>

<div class="container">
  <header class="header">
    <a href="https://aura-cabinet.com" class="logo">AURA<span>.</span></a>
    <h1>Diagn√≥stico AURA</h1>
    <p>Descubre en 3 minutos el protocolo de reputaci√≥n digital que mejor se adapta a tu situaci√≥n.</p>
  </header>

  <div class="progress-container">
    <div class="progress-bar" id="progressBar"></div>
  </div>

  <form id="diagnosticForm">
    
    <!-- PASO 1: Datos B√°sicos -->
    <div class="question-card active">
      <div class="step-label">Paso 1 de 8</div>
      <h2>Para comenzar, cu√©ntanos qui√©n eres</h2>
      <p>Necesitamos tus datos b√°sicos para poder enviarte el diagn√≥stico personalizado.</p>
      
      <div class="form-group">
        <label for="nombre">Nombre completo <span class="required">*</span></label>
        <input type="text" id="nombre" placeholder="Tu nombre">
        <div class="error-message" id="error-nombre">Por favor, introduce tu nombre</div>
      </div>
      
      <div class="form-group">
        <label for="email">Email <span class="required">*</span></label>
        <input type="email" id="email" placeholder="tu@email.com">
        <div class="error-message" id="error-email">Por favor, introduce un email v√°lido</div>
      </div>
      
      <div class="form-group">
        <label for="telefono">Tel√©fono (opcional)</label>
        <input type="tel" id="telefono" placeholder="+34 600 000 000">
      </div>
      
      <div class="form-group">
        <label>Representas a: <span class="required">*</span></label>
        <div class="radio-group">
          <div class="radio-option">
            <input type="radio" id="tipo-persona" name="tipo" value="persona">
            <span class="radio-custom"></span>
            <label for="tipo-persona">Una persona f√≠sica (profesional independiente, figura p√∫blica...)</label>
          </div>
          <div class="radio-option">
            <input type="radio" id="tipo-empresa" name="tipo" value="empresa">
            <span class="radio-custom"></span>
            <label for="tipo-empresa">Una empresa u organizaci√≥n</label>
          </div>
        </div>
        <div class="error-message" id="error-tipo">Por favor, selecciona una opci√≥n</div>
      </div>
      
      <div class="btn-group">
        <button type="button" class="btn btn-primary" onclick="validateAndNext(1)">Continuar</button>
      </div>
    </div>

    <!-- PASO 2: Sector -->
    <div class="question-card">
      <div class="step-label">Paso 2 de 8</div>
      <h2>¬øEn qu√© sector operas?</h2>
      <p>Esto nos ayuda a entender mejor tu contexto y necesidades espec√≠ficas.</p>
      
      <div class="form-group">
        <label for="sector">Sector <span class="required">*</span></label>
        <select id="sector">
          <option value="">Selecciona...</option>
          <option value="salud">Salud y Bienestar</option>
          <option value="legal">Legal y Jur√≠dico</option>
          <option value="tech">Tecnolog√≠a e Innovaci√≥n</option>
          <option value="inmobiliario">Inmobiliario</option>
          <option value="finanzas">Finanzas y Consultor√≠a</option>
          <option value="educacion">Educaci√≥n y Formaci√≥n</option>
          <option value="arte-cultura">Arte y Cultura</option>
          <option value="hosteleria">Hosteler√≠a y Turismo</option>
          <option value="otro">Otro</option>
        </select>
        <div class="error-message" id="error-sector">Por favor, selecciona un sector</div>
      </div>
      
      <div class="form-group" id="sector-otro-group" style="display:none;">
        <label for="sector-otro">Especifica tu sector</label>
        <input type="text" id="sector-otro" placeholder="Describe tu sector">
      </div>
      
      <div class="btn-group">
        <button type="button" class="btn btn-secondary" onclick="prevStep()">Atr√°s</button>
        <button type="button" class="btn btn-primary" onclick="validateAndNext(2)">Continuar</button>
      </div>
    </div>

    <!-- PASO 3: Presencia Digital -->
    <div class="question-card">
      <div class="step-label">Paso 3 de 8</div>
      <h2>¬øTienes presencia digital actualmente?</h2>
      <p>Web, redes sociales, blog... cualquier cosa cuenta.</p>
      
      <div class="form-group">
        <div class="radio-group">
          <div class="radio-option">
            <input type="radio" id="presencia-si" name="presencia" value="si">
            <span class="radio-custom"></span>
            <label for="presencia-si">S√≠, tengo presencia digital activa</label>
          </div>
          <div class="radio-option">
            <input type="radio" id="presencia-algo" name="presencia" value="algo">
            <span class="radio-custom"></span>
            <label for="presencia-algo">Tengo algo, pero est√° abandonado</label>
          </div>
          <div class="radio-option">
            <input type="radio" id="presencia-no" name="presencia" value="no">
            <span class="radio-custom"></span>
            <label for="presencia-no">No, parto de cero</label>
          </div>
        </div>
        <div class="error-message" id="error-presencia">Por favor, selecciona una opci√≥n</div>
      </div>
      
      <div class="form-group" id="url-group" style="display:none;">
        <label for="url">Tu web o perfil principal (opcional)</label>
        <input type="url" id="url" placeholder="https://...">
      </div>
      
      <div class="btn-group">
        <button type="button" class="btn btn-secondary" onclick="prevStep()">Atr√°s</button>
        <button type="button" class="btn btn-primary" onclick="validateAndNext(3)">Continuar</button>
      </div>
    </div>

    <!-- PASO 4: Situaci√≥n Actual -->
    <div class="question-card">
      <div class="step-label">Paso 4 de 8</div>
      <h2>¬øCu√°l de estas situaciones te describe mejor?</h2>
      <p>Puedes marcar varias si aplican.</p>
      
      <div class="form-group">
        <div class="checkbox-group">
          <div class="checkbox-option">
            <input type="checkbox" id="sit-nadie" name="situacion" value="nadie-conoce">
            <span class="checkbox-custom"></span>
            <label for="sit-nadie">Nadie me conoce en mi sector</label>
          </div>
          <div class="checkbox-option">
            <input type="checkbox" id="sit-presencia" name="situacion" value="presencia-pobre">
            <span class="checkbox-custom"></span>
            <label for="sit-presencia">Mi presencia digital es pobre o confusa</label>
          </div>
          <div class="checkbox-option">
            <input type="checkbox" id="sit-posicionamiento" name="situacion" value="posicionamiento">
            <span class="checkbox-custom"></span>
            <label for="sit-posicionamiento">Tengo presencia pero mal posicionamiento</label>
          </div>
          <div class="checkbox-option">
            <input type="checkbox" id="sit-crisis" name="situacion" value="crisis">
            <span class="checkbox-custom"></span>
            <label for="sit-crisis">Estoy en una crisis de reputaci√≥n</label>
          </div>
        </div>
        <div class="error-message" id="error-situacion">Por favor, selecciona al menos una opci√≥n</div>
      </div>
      
      <div class="form-group">
        <label>¬øHay contenido negativo sobre ti/tu marca en internet? <span class="required">*</span></label>
        <div class="radio-group">
          <div class="radio-option">
            <input type="radio" id="negativo-si" name="negativo" value="si">
            <span class="radio-custom"></span>
            <label for="negativo-si">S√≠, hay contenido negativo o perjudicial</label>
          </div>
          <div class="radio-option">
            <input type="radio" id="negativo-no" name="negativo" value="no">
            <span class="radio-custom"></span>
            <label for="negativo-no">No, mi reputaci√≥n est√° limpia</label>
          </div>
          <div class="radio-option">
            <input type="radio" id="negativo-nosabe" name="negativo" value="no-se">
            <span class="radio-custom"></span>
            <label for="negativo-nosabe">No lo s√©, no he comprobado</label>
          </div>
        </div>
        <div class="error-message" id="error-negativo">Por favor, selecciona una opci√≥n</div>
      </div>
      
      <div class="btn-group">
        <button type="button" class="btn btn-secondary" onclick="prevStep()">Atr√°s</button>
        <button type="button" class="btn btn-primary" onclick="validateAndNext(4)">Continuar</button>
      </div>
    </div>

    <!-- PASO 5: Objetivos -->
    <div class="question-card">
      <div class="step-label">Paso 5 de 8</div>
      <h2>¬øQu√© buscas conseguir?</h2>
      <p>Marca tus objetivos principales (puedes elegir varios).</p>
      
      <div class="form-group">
        <div class="checkbox-group">
          <div class="checkbox-option">
            <input type="checkbox" id="obj-reconocimiento" name="objetivos" value="reconocimiento">
            <span class="checkbox-custom"></span>
            <label for="obj-reconocimiento">Ser reconocido como experto/referente en mi sector</label>
          </div>
          <div class="checkbox-option">
            <input type="checkbox" id="obj-captar" name="objetivos" value="captar-clientes">
            <span class="checkbox-custom"></span>
            <label for="obj-captar">Captar m√°s clientes o proyectos</label>
          </div>
          <div class="checkbox-option">
            <input type="checkbox" id="obj-inversion" name="objetivos" value="inversion">
            <span class="checkbox-custom"></span>
            <label for="obj-inversion">Atraer inversi√≥n o partners estrat√©gicos</label>
          </div>
          <div class="checkbox-option">
            <input type="checkbox" id="obj-proteger" name="objetivos" value="proteger">
            <span class="checkbox-custom"></span>
            <label for="obj-proteger">Proteger mi reputaci√≥n actual</label>
          </div>
          <div class="checkbox-option">
            <input type="checkbox" id="obj-limpiar" name="objetivos" value="limpiar">
            <span class="checkbox-custom"></span>
            <label for="obj-limpiar">Limpiar contenido negativo existente</label>
          </div>
        </div>
        <div class="error-message" id="error-objetivos">Por favor, selecciona al menos un objetivo</div>
      </div>
      
      <div class="btn-group">
        <button type="button" class="btn btn-secondary" onclick="prevStep()">Atr√°s</button>
        <button type="button" class="btn btn-primary" onclick="validateAndNext(5)">Continuar</button>
      </div>
    </div>

    <!-- PASO 6: Urgencia y Presupuesto -->
    <div class="question-card">
      <div class="step-label">Paso 6 de 8</div>
      <h2>Cu√°ndo necesitas actuar y qu√© presupuesto manejas</h2>
      <p>Esto nos ayuda a recomendarte el protocolo m√°s adecuado.</p>
      
      <div class="form-group">
        <label>Urgencia <span class="required">*</span></label>
        <div class="radio-group">
          <div class="radio-option">
            <input type="radio" id="urgencia-urgente" name="urgencia" value="urgente">
            <span class="radio-custom"></span>
            <label for="urgencia-urgente">Urgente (tengo un problema activo ahora)</label>
          </div>
          <div class="radio-option">
            <input type="radio" id="urgencia-corto" name="urgencia" value="corto-plazo">
            <span class="radio-custom"></span>
            <label for="urgencia-corto">Corto plazo (1-3 meses)</label>
          </div>
          <div class="radio-option">
            <input type="radio" id="urgencia-medio" name="urgencia" value="medio-plazo">
            <span class="radio-custom"></span>
            <label for="urgencia-medio">Medio plazo (3-6 meses)</label>
          </div>
          <div class="radio-option">
            <input type="radio" id="urgencia-largo" name="urgencia" value="largo-plazo">
            <span class="radio-custom"></span>
            <label for="urgencia-largo">Largo plazo (6+ meses)</label>
          </div>
        </div>
        <div class="error-message" id="error-urgencia">Por favor, selecciona una opci√≥n</div>
      </div>
      
      <div class="form-group">
        <label>Presupuesto aproximado (opcional)</label>
        <div class="radio-group">
          <div class="radio-option">
            <input type="radio" id="pres-1" name="presupuesto" value="<2000">
            <span class="radio-custom"></span>
            <label for="pres-1">Menos de 2.000‚Ç¨</label>
          </div>
          <div class="radio-option">
            <input type="radio" id="pres-2" name="presupuesto" value="2000-5000">
            <span class="radio-custom"></span>
            <label for="pres-2">2.000‚Ç¨ - 5.000‚Ç¨</label>
          </div>
          <div class="radio-option">
            <input type="radio" id="pres-3" name="presupuesto" value="5000-15000">
            <span class="radio-custom"></span>
            <label for="pres-3">5.000‚Ç¨ - 15.000‚Ç¨</label>
          </div>
          <div class="radio-option">
            <input type="radio" id="pres-4" name="presupuesto" value=">15000">
            <span class="radio-custom"></span>
            <label for="pres-4">M√°s de 15.000‚Ç¨</label>
          </div>
        </div>
      </div>
      
      <div class="btn-group">
        <button type="button" class="btn btn-secondary" onclick="prevStep()">Atr√°s</button>
        <button type="button" class="btn btn-primary" onclick="validateAndNext(6)">Continuar</button>
      </div>
    </div>

    <!-- PASO 7: Informaci√≥n adicional -->
    <div class="question-card">
      <div class="step-label">Paso 7 de 8</div>
      <h2>√öltima pregunta: algo m√°s que debamos saber</h2>
      <p>Cualquier detalle adicional que nos ayude a entender mejor tu situaci√≥n.</p>
      
      <div class="form-group">
        <label for="comentarios">Comentarios adicionales (opcional)</label>
        <textarea id="comentarios" placeholder="Cu√©ntanos cualquier detalle relevante sobre tu situaci√≥n..."></textarea>
      </div>
      
      <div class="form-group">
        <label for="fuente">¬øC√≥mo nos conociste? (opcional)</label>
        <select id="fuente">
          <option value="">Selecciona...</option>
          <option value="google">B√∫squeda en Google</option>
          <option value="redes">Redes sociales</option>
          <option value="recomendacion">Recomendaci√≥n</option>
          <option value="prensa">Art√≠culo o prensa</option>
          <option value="otro">Otro</option>
        </select>
      </div>
      
      <div class="btn-group">
        <button type="button" class="btn btn-secondary" onclick="prevStep()">Atr√°s</button>
        <button type="button" class="btn btn-primary" onclick="validateAndNext(7)">Ver mi diagn√≥stico</button>
      </div>
    </div>

    <!-- PASO 8: Resumen y Confirmaci√≥n -->
    <div class="question-card">
      <div class="step-label">Paso 8 de 8</div>
      <h2>Confirma tus datos</h2>
      <p>Revisa la informaci√≥n antes de enviar tu diagn√≥stico.</p>
      
      <div class="resumen" id="resumen-datos">
        <!-- Se llenar√° con JavaScript -->
      </div>
      
      <div class="form-group">
        <div class="checkbox-option">
          <input type="checkbox" id="acepto">
          <span class="checkbox-custom"></span>
          <label for="acepto">Acepto el tratamiento de mis datos para recibir el diagn√≥stico personalizado y comunicaciones de AURA Cabinet sobre sus servicios. <span class="required">*</span></label>
        </div>
        <div class="error-message" id="error-acepto">Debes aceptar el tratamiento de datos para continuar</div>
      </div>
      
      <!-- Loading spinner -->
      <div class="loading-spinner" id="loadingSpinner">
        <div class="spinner"></div>
        <p>Enviando tu diagn√≥stico...</p>
      </div>
      
      <!-- Status messages -->
      <div class="status-message success" id="successMessage">
        ‚úì ¬°Diagn√≥stico enviado correctamente! Recibir√°s una respuesta en las pr√≥ximas 48 horas.
      </div>
      
      <div class="status-message error" id="errorMessage">
        ‚úó Ha ocurrido un error al enviar el diagn√≥stico. Por favor, int√©ntalo de nuevo o contacta con nosotros directamente.
      </div>
      
      <div class="btn-group">
        <button type="button" class="btn btn-secondary" onclick="prevStep()">Atr√°s</button>
        <button type="submit" class="btn btn-primary" id="submitBtn">Enviar diagn√≥stico</button>
      </div>
    </div>

    <!-- PASO 9: Pantalla Final -->
    <div class="question-card">
      <div style="text-align: center; padding: 2rem 0;">
        <h2 style="margin-bottom: 2rem;">¬°Gracias, <span id="nombre-final"></span>!</h2>
        
        <p style="font-size: 1.1rem; margin-bottom: 2rem;">Tu diagn√≥stico AURA ha sido enviado correctamente.</p>
        
        <div style="background: var(--accent-dim); padding: 2rem; border-radius: 4px; margin-bottom: 2rem;">
          <p style="color: var(--text); margin-bottom: 1rem;"><strong>üìß Recibir√°s en tu email:</strong></p>
          <ul style="text-align: left; max-width: 400px; margin: 0 auto; color: var(--text-dim); line-height: 2;">
            <li>Tu protocolo AURA recomendado</li>
            <li>An√°lisis personalizado de tu situaci√≥n</li>
            <li>Pr√≥ximos pasos sugeridos</li>
            <li>Opci√≥n de agendar una consulta</li>
          </ul>
        </div>
        
        <div id="urgencia-mensaje" style="display: none; background: #fff3cd; border: 1px solid #ffc107; padding: 1.5rem; border-radius: 4px; margin-bottom: 2rem;">
          <p style="color: #856404; margin: 0;"><strong>‚ö° Caso urgente:</strong> Hemos priorizado tu solicitud. Recibir√°s respuesta en las pr√≥ximas 24 horas.</p>
        </div>
        
        <p style="color: var(--text-dim); font-size: 0.95rem;">Tiempo de respuesta estimado: <strong>24-48 horas</strong></p>
        
        <a href="https://aura-cabinet.com" class="btn btn-primary" style="display: inline-block; margin-top: 2rem; text-decoration: none;">Volver a AURA</a>
      </div>
    </div>

  </form>
</div>

<footer>
  <p>&copy; 2025 AURA Cabinet. <a href="https://aura-cabinet.com/privacidad">Pol√≠tica de Privacidad</a> ¬∑ <a href="https://aura-cabinet.com">Inicio</a></p>
</footer>

<script>
// ‚îÄ‚îÄ PART√çCULAS CANVAS ‚îÄ‚îÄ
(function() {
  const canvas = document.getElementById('particles-canvas');
  const ctx = canvas.getContext('2d');
  let w, h;
  const particles = [];
  const particleCount = 35;
  
  function init() {
    w = canvas.width = window.innerWidth;
    h = canvas.height = window.innerHeight;
    particles.length = 0;
    for (let i = 0; i < particleCount; i++) {
      particles.push({
        x: Math.random() * w,
        y: Math.random() * h,
        vx: (Math.random() - 0.5) * 0.3,
        vy: (Math.random() - 0.5) * 0.3,
        r: Math.random() * 1.5 + 0.5
      });
    }
  }
  
  function animate() {
    ctx.clearRect(0, 0, w, h);
    ctx.fillStyle = 'rgba(61, 107, 92, 0.15)';
    particles.forEach(p => {
      ctx.beginPath();
      ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
      ctx.fill();
      
      p.x += p.vx;
      p.y += p.vy;
      
      if (p.x < 0 || p.x > w) p.vx *= -1;
      if (p.y < 0 || p.y > h) p.vy *= -1;
    });
    requestAnimationFrame(animate);
  }
  
  window.addEventListener('resize', init);
  init();
  animate();
})();

// ‚îÄ‚îÄ CUESTIONARIO ‚îÄ‚îÄ
let currentStep = 0;
const totalSteps = 9;
const formData = {};

// Inicializar
document.addEventListener('DOMContentLoaded', () => {
  updateProgress();
  
  // Mostrar campo "otro" cuando se selecciona
  document.getElementById('sector').addEventListener('change', (e) => {
    document.getElementById('sector-otro-group').style.display = 
      e.target.value === 'otro' ? 'block' : 'none';
  });
  
  // Mostrar URL cuando tiene presencia
  document.querySelectorAll('input[name="presencia"]').forEach(radio => {
    radio.addEventListener('change', (e) => {
      document.getElementById('url-group').style.display = 
        e.target.value === 'si' ? 'block' : 'none';
    });
  });
});

function nextStep() {
  const cards = document.querySelectorAll('.question-card');
  cards[currentStep].classList.remove('active');
  currentStep++;
  cards[currentStep].classList.add('active');
  updateProgress();
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

function prevStep() {
  const cards = document.querySelectorAll('.question-card');
  cards[currentStep].classList.remove('active');
  currentStep--;
  cards[currentStep].classList.add('active');
  updateProgress();
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

function updateProgress() {
  const progress = (currentStep / totalSteps) * 100;
  document.getElementById('progressBar').style.width = progress + '%';
}

function validateAndNext(step) {
  let valid = true;
  
  // Validaci√≥n seg√∫n el paso
  if (step === 1) {
    // Validar nombre
    const nombre = document.getElementById('nombre').value.trim();
    if (!nombre) {
      showError('nombre');
      valid = false;
    } else {
      hideError('nombre');
      formData.nombre = nombre;
    }
    
    // Validar email
    const email = document.getElementById('email').value.trim();
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (!email || !emailRegex.test(email)) {
      showError('email');
      valid = false;
    } else {
      hideError('email');
      formData.email = email;
    }
    
    // Validar tipo
    const tipo = document.querySelector('input[name="tipo"]:checked');
    if (!tipo) {
      showError('tipo');
      valid = false;
    } else {
      hideError('tipo');
      formData.tipo = tipo.value;
    }
    
    // Guardar tel√©fono si existe
    formData.telefono = document.getElementById('telefono').value.trim();
  }
  
  if (step === 2) {
    const sector = document.getElementById('sector').value;
    if (!sector) {
      showError('sector');
      valid = false;
    } else {
      hideError('sector');
      formData.sector = sector;
      if (sector === 'otro') {
        formData.sectorOtro = document.getElementById('sector-otro').value.trim();
      }
    }
  }
  
  if (step === 3) {
    const presencia = document.querySelector('input[name="presencia"]:checked');
    if (!presencia) {
      showError('presencia');
      valid = false;
    } else {
      hideError('presencia');
      formData.presencia = presencia.value;
      if (presencia.value === 'si') {
        formData.url = document.getElementById('url').value.trim();
      }
    }
  }
  
  if (step === 4) {
    // Validar situaci√≥n (al menos una)
    const situacion = document.querySelectorAll('input[name="situacion"]:checked');
    if (situacion.length === 0) {
      showError('situacion');
      valid = false;
    } else {
      hideError('situacion');
      formData.situacion = Array.from(situacion).map(s => s.value);
    }
    
    // Validar contenido negativo
    const negativo = document.querySelector('input[name="negativo"]:checked');
    if (!negativo) {
      showError('negativo');
      valid = false;
    } else {
      hideError('negativo');
      formData.negativo = negativo.value;
    }
  }
  
  if (step === 5) {
    const objetivos = document.querySelectorAll('input[name="objetivos"]:checked');
    if (objetivos.length === 0) {
      showError('objetivos');
      valid = false;
    } else {
      hideError('objetivos');
      formData.objetivos = Array.from(objetivos).map(o => o.value);
    }
  }
  
  if (step === 6) {
    const urgencia = document.querySelector('input[name="urgencia"]:checked');
    if (!urgencia) {
      showError('urgencia');
      valid = false;
    } else {
      hideError('urgencia');
      formData.urgencia = urgencia.value;
    }
    
    const presupuesto = document.querySelector('input[name="presupuesto"]:checked');
    formData.presupuesto = presupuesto ? presupuesto.value : 'no-especificado';
  }
  
  if (step === 7) {
    formData.comentarios = document.getElementById('comentarios').value.trim();
    formData.fuente = document.getElementById('fuente').value;
    
    // Generar resumen
    generarResumen();
  }
  
  if (valid) {
    nextStep();
  }
}

function showError(fieldId) {
  document.getElementById('error-' + fieldId).classList.add('show');
  const field = document.getElementById(fieldId);
  if (field) {
    field.style.borderColor = '#c94b4b';
  }
}

function hideError(fieldId) {
  document.getElementById('error-' + fieldId).classList.remove('show');
  const field = document.getElementById(fieldId);
  if (field) {
    field.style.borderColor = '';
  }
}

function generarResumen() {
  const resumen = `
    <strong>Nombre:</strong> ${formData.nombre}<br>
    <strong>Email:</strong> ${formData.email}<br>
    <strong>Tipo:</strong> ${formData.tipo === 'persona' ? 'Persona f√≠sica' : 'Empresa'}<br>
    <strong>Sector:</strong> ${formData.sector}<br>
    <strong>Urgencia:</strong> ${formData.urgencia}
  `;
  document.getElementById('resumen-datos').innerHTML = resumen;
}

// Env√≠o del formulario con EmailJS
document.getElementById('diagnosticForm').addEventListener('submit', function(e) {
  e.preventDefault();
  
  console.log('=== SUBMIT INICIADO ===');
  
  // Validar aceptaci√≥n
  const acepto = document.getElementById('acepto').checked;
  console.log('Checkbox acepto:', acepto);
  
  if (!acepto) {
    showError('acepto');
    console.log('ERROR: No ha aceptado los t√©rminos');
    return;
  }
  hideError('acepto');
  
  // Calcular protocolo recomendado
  const protocolo = calcularProtocolo();
  formData.protocoloRecomendado = protocolo;
  
  console.log('Datos completos:', formData);
  console.log('Protocolo:', protocolo);
  
  // Deshabilitar bot√≥n y mostrar loading
  const submitBtn = document.getElementById('submitBtn');
  const loadingSpinner = document.getElementById('loadingSpinner');
  submitBtn.disabled = true;
  loadingSpinner.classList.add('show');
  
  // Preparar datos para EmailJS con los nombres correctos
  const templateParams = {
    from_name: formData.nombre || 'No proporcionado',
    email: formData.email || 'No proporcionado',
    message: generarMensajeCompleto(protocolo)
  };
  
  console.log('Enviando email con EmailJS...', templateParams);
  
  // Enviar con EmailJS
  emailjs.send('service_662y2ak', 'template_7ngqtyt', templateParams)
    .then(function(response) {
      console.log('SUCCESS!', response.status, response.text);
      
      // Ocultar loading
      loadingSpinner.classList.remove('show');
      
      // Mostrar mensaje de √©xito
      document.getElementById('successMessage').classList.add('show');
      
      // Esperar 2 segundos y avanzar a pantalla final
      setTimeout(() => {
        document.getElementById('successMessage').classList.remove('show');
        document.getElementById('nombre-final').textContent = formData.nombre || 'Usuario';
        
        // Mostrar mensaje de urgencia si aplica
        if (formData.urgencia === 'urgente') {
          document.getElementById('urgencia-mensaje').style.display = 'block';
        }
        
        nextStep();
      }, 2000);
      
    }, function(error) {
      console.log('FAILED...', error);
      
      // Ocultar loading
      loadingSpinner.classList.remove('show');
      
      // Mostrar mensaje de error
      document.getElementById('errorMessage').classList.add('show');
      
      // Rehabilitar bot√≥n
      submitBtn.disabled = false;
      
      // Ocultar mensaje de error despu√©s de 5 segundos
      setTimeout(() => {
        document.getElementById('errorMessage').classList.remove('show');
      }, 5000);
    });
});

function generarMensajeCompleto(protocolo) {
  return `
DIAGN√ìSTICO AURA - NUEVA SOLICITUD

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
DATOS DEL SOLICITANTE
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

Nombre: ${formData.nombre || 'No proporcionado'}
Email: ${formData.email || 'No proporcionado'}
Tel√©fono: ${formData.telefono || 'No proporcionado'}
Tipo: ${formData.tipo === 'persona' ? 'Persona f√≠sica' : 'Empresa'}
Sector: ${formData.sector}${formData.sectorOtro ? ' (' + formData.sectorOtro + ')' : ''}

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
SITUACI√ìN ACTUAL
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

Presencia digital: ${formData.presencia === 'si' ? 'Activa' : formData.presencia === 'algo' ? 'Abandonada' : 'Ninguna'}
${formData.url ? 'URL: ' + formData.url : ''}

Situaci√≥n:
${formData.situacion ? formData.situacion.map(s => '‚Ä¢ ' + s).join('\n') : 'No especificada'}

Contenido negativo: ${formData.negativo === 'si' ? 'S√ç - hay contenido perjudicial' : formData.negativo === 'no' ? 'NO - reputaci√≥n limpia' : 'No verificado'}

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
OBJETIVOS
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

${formData.objetivos ? formData.objetivos.map(o => '‚Ä¢ ' + o).join('\n') : 'No especificados'}

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
TIMING Y PRESUPUESTO
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

Urgencia: ${formData.urgencia || 'No especificada'}
Presupuesto: ${formData.presupuesto || 'No especificado'}

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
INFORMACI√ìN ADICIONAL
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

${formData.comentarios || 'Sin comentarios adicionales'}

Fuente de referencia: ${formData.fuente || 'No especificada'}

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
PROTOCOLO RECOMENDADO
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

${protocolo}

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Fecha: ${new Date().toLocaleString('es-ES', { 
  weekday: 'long', 
  year: 'numeric', 
  month: 'long', 
  day: 'numeric',
  hour: '2-digit',
  minute: '2-digit'
})}
  `.trim();
}

function calcularProtocolo() {
  let scores = {
    clarity: 0,
    narrative: 0,
    presence: 0,
    elite: 0
  };
  
  // ELITE autom√°tico si crisis
  if (formData.situacion.includes('crisis') || formData.urgencia === 'urgente') {
    scores.elite += 10;
  }
  
  if (formData.negativo === 'si') {
    scores.elite += 8;
  }
  
  // CLARITY
  if (formData.presencia === 'no' || formData.presencia === 'algo') {
    scores.clarity += 3;
  }
  
  if (formData.situacion.includes('nadie-conoce')) {
    scores.clarity += 3;
  }
  
  if (formData.presupuesto === '<2000') {
    scores.clarity += 2;
  }
  
  // NARRATIVE
  if (formData.situacion.includes('presencia-pobre')) {
    scores.narrative += 3;
  }
  
  if (formData.objetivos.includes('captar-clientes') || formData.objetivos.includes('inversion')) {
    scores.narrative += 3;
  }
  
  if (formData.presencia === 'si') {
    scores.narrative += 2;
  }
  
  // PRESENCE
  if (formData.objetivos.includes('reconocimiento')) {
    scores.presence += 4;
  }
  
  if (formData.situacion.includes('posicionamiento')) {
    scores.presence += 3;
  }
  
  if (formData.negativo === 'no') {
    scores.presence += 2;
  }
  
  if (formData.presupuesto === '5000-15000' || formData.presupuesto === '>15000') {
    scores.presence += 2;
  }
  
  // Si hay puntuaci√≥n alta en ELITE, devolver ELITE
  if (scores.elite >= 10) {
    return 'AURA Elite (Crisis Management)';
  }
  
  // Determinar protocolo predominante
  const maxScore = Math.max(scores.clarity, scores.narrative, scores.presence);
  
  if (maxScore === scores.clarity) {
    return 'AURA Clarity';
  } else if (maxScore === scores.narrative) {
    return 'AURA Narrative';
  } else {
    return 'AURA Presence';
  }
}

</script>
</body>
</html>
